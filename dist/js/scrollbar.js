/*! formstone v1.4.16-1 [scrollbar.js] 2019-08-06 | GPL-3.0 License | formstone.it */
!function(t){"function"==typeof define&&define.amd?define(["jquery","./core","./touch"],t):t(jQuery,Formstone)}(function(r,t){"use strict";function e(t){t.$el.addClass(g.isSetup);var n={},e={},o={},a=0,i=!0;t.horizontal?(t.barHeight=t.$content[0].offsetHeight-t.$content[0].clientHeight,t.frameWidth=t.$content.outerWidth(),t.trackWidth=t.frameWidth-2*t.trackMargin,t.scrollWidth=t.$content[0].scrollWidth,t.ratio=t.trackWidth/t.scrollWidth,t.trackRatio=t.trackWidth/t.scrollWidth,t.handleWidth=0<t.handleSize?t.handleSize:t.trackWidth*t.trackRatio,t.scrollRatio=(t.scrollWidth-t.frameWidth)/(t.trackWidth-t.handleWidth),t.handleBounds={left:0,right:t.trackWidth-t.handleWidth},t.$content.css({paddingBottom:t.barHeight+t.paddingBottom}),a=t.$content.scrollLeft()*t.ratio,i=t.scrollWidth<=t.frameWidth,n={width:t.frameWidth},e={width:t.trackWidth,marginLeft:t.trackMargin,marginRight:t.trackMargin},o={width:t.handleWidth}):(t.barWidth=t.$content[0].offsetWidth-t.$content[0].clientWidth,t.frameHeight=t.$content.outerHeight(),t.trackHeight=t.frameHeight-2*t.trackMargin,t.scrollHeight=t.$content[0].scrollHeight,t.ratio=t.trackHeight/t.scrollHeight,t.trackRatio=t.trackHeight/t.scrollHeight,t.handleHeight=0<t.handleSize?t.handleSize:t.trackHeight*t.trackRatio,t.scrollRatio=(t.scrollHeight-t.frameHeight)/(t.trackHeight-t.handleHeight),t.handleBounds={top:0,bottom:t.trackHeight-t.handleHeight},a=t.$content.scrollTop()*t.ratio,i=t.scrollHeight<=t.frameHeight,n={height:t.frameHeight},e={height:t.trackHeight,marginBottom:t.trackMargin,marginTop:t.trackMargin},o={height:t.handleHeight});i?t.$el.removeClass(g.active):t.$el.addClass(g.active),t.$bar.css(n),t.$track.css(e),t.$handle.css(o),t.panning=!1,s(t,a),l({data:t}),t.$el.removeClass(g.setup)}function l(t){p.killEvent(t);var n=t.data,e={};if(!n.panning){if(n.horizontal){var o=n.$content.scrollLeft();o<0&&(o=0),n.handleLeft=o/n.scrollRatio,n.handleLeft>n.handleBounds.right&&(n.handleLeft=n.handleBounds.right),e={left:n.handleLeft}}else{var a=n.$content.scrollTop();a<0&&(a=0),n.handleTop=a/n.scrollRatio,n.handleTop>n.handleBounds.bottom&&(n.handleTop=n.handleBounds.bottom),e={top:n.handleTop}}n.$handle.css(e)}}function o(t){a(t,!0)}function a(t,n){var e,o,a=t.data;if(a.horizontal){var i=a.$content[0].scrollLeft,l=a.$content[0].scrollWidth,r=a.$content.outerWidth();if(e=t.originalEvent.deltaX*(!0===n?-1:1),!0===n)return a.$content.scrollLeft(i-e),d(t);if("left"===(o=e<0?"right":"left")&&l-r-i<e)return a.$content.scrollLeft(l),d(t);if("right"===o&&i<-e)return a.$content.scrollLeft(0),d(t)}else{var c=a.$content[0].scrollTop,h=a.$content[0].scrollHeight,s=a.$content.outerHeight();if(e=t.originalEvent.deltaY*(!0===n?-1:1),!0===n)return a.$content.scrollTop(c-e),d(t);if("down"===(o=e<0?"up":"down")&&h-s-c<e)return a.$content.scrollTop(h),d(t);if("up"===o&&c<-e)return a.$content.scrollTop(0),d(t)}}function d(t){return p.killEvent(t),t.returnValue=!1}function i(t){var n,e=t.data,o=e.$track.offset();e.panning=!0,n=e.horizontal?e.handleLeft=t.pageX-o.left-e.handleWidth/2:e.handleTop=t.pageY-o.top-e.handleHeight/2,s(e,n)}function c(t){var n=t.data;s(n,n.horizontal?n.handleLeft+t.deltaX:n.handleTop+t.deltaY)}function h(t){var n=t.data;n.panning=!1,n.horizontal?n.handleLeft+=t.deltaX:n.handleTop+=t.deltaY}function s(t,n){var e={};t.horizontal?(n<t.handleBounds.left&&(n=t.handleBounds.left),n>t.handleBounds.right&&(n=t.handleBounds.right),e={left:n},t.$content.scrollLeft(Math.round(n*t.scrollRatio))):(n<t.handleBounds.top&&(n=t.handleBounds.top),n>t.handleBounds.bottom&&(n=t.handleBounds.bottom),e={top:n},t.$content.scrollTop(Math.round(n*t.scrollRatio))),t.$handle.css(e)}var n=t.Plugin("scrollbar",{widget:!0,defaults:{customClass:"",duration:0,handleSize:0,horizontal:!1,mouseWheel:!0,theme:"fs-light",trackMargin:0},classes:["content","bar","track","handle","horizontal","setup","active"],methods:{_construct:function(t){var n="";n+='<div class="'+g.bar+'">',n+='<div class="'+g.track+'">',n+='<button type="button" class="'+g.handle+'" aria-hidden="true" tabindex="-1"></button>',n+="</div></div>",t.paddingRight=parseInt(this.css("padding-right"),10),t.paddingBottom=parseInt(this.css("padding-bottom"),10),t.thisClasses=[g.base,t.theme,t.customClass,t.horizontal?g.horizontal:""],this.addClass(t.thisClasses.join(" ")).wrapInner('<div class="'+g.content+'" tabindex="0"></div>').prepend(n),t.$content=this.find(f.content),t.$bar=this.find(f.bar),t.$track=this.find(f.track),t.$handle=this.find(f.handle),t.trackMargin=parseInt(t.trackMargin,10),t.$content.on(u.scroll,t,l),t.mouseWheel&&t.$content.on("wheel"+u.namespace,t,a),t.$track.fsTouch({axis:t.horizontal?"x":"y",pan:!0}).on(u.panStart,t,i).on(u.pan,t,c).on(u.panEnd,t,h).on(u.click,p.killEvent).on("wheel"+u.namespace,t,o),e(t),$=r(f.base)},_destruct:function(t){t.$track.fsTouch("destroy"),t.$bar.remove(),t.$content.off(u.namespace).contents().unwrap(),this.removeClass(t.thisClasses.join(" ")).off(u.namespace),this.attr("id")===t.rawGuid&&this.removeAttr("id")},_resize:function(t){p.iterate.call($,e)},scroll:function(t,n,e){var o=e||t.duration,a={};if("number"!==r.type(n)){var i=r(n);if(0<i.length){var l=i.position();n=t.horizontal?l.left+t.$content.scrollLeft():l.top+t.$content.scrollTop()}else n="top"===n?0:"bottom"===n?t.horizontal?t.$content[0].scrollWidth:t.$content[0].scrollHeight:t.$content.scrollTop()}a[t.horizontal?"scrollLeft":"scrollTop"]=n,t.$content.stop().animate(a,o)},resize:e}}),f=n.classes,g=f.raw,u=n.events,p=n.functions,$=(t.$window,[]);t.Ready(function(){t.$body})});