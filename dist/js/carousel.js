/*! formstone v0.6.15 [carousel.js] 2015-07-02 | MIT License | formstone.it */

!function(a,b,c){"use strict";function d(a){G.iterate.call(H,j)}function e(){H=a(D.base)}function f(c){var d;c.maxWidth=c.maxWidth===1/0?"100000px":c.maxWidth,c.mq="(min-width:"+c.minWidth+") and (max-width:"+c.maxWidth+")",b.support.transform||(c.useMargin=!0);var f="",g="";if(c.controls&&(f+='<div class="'+E.controls+'">',f+='<button type="button" class="'+[E.control,E.control_previous].join(" ")+'">'+c.labels.previous+"</button>",f+='<button type="button" class="'+[E.control,E.control_next].join(" ")+'">'+c.labels.next+"</button>",f+="</div>"),c.pagination&&(g+='<div class="'+E.pagination+'">',g+="</div>"),this.addClass([E.base,c.customClass,c.rtl?E.rtl:E.ltr].join(" ")).wrapInner('<div class="'+E.wrapper+'"><div class="'+E.container+'"><div class="'+E.canister+'"></div></div></div>').append(f).wrapInner('<div class="'+E.viewport+'"></div>').append(g),c.$viewport=this.find(D.viewport).eq(0),c.$container=this.find(D.container).eq(0),c.$canister=this.find(D.canister).eq(0),c.$controls=this.find(D.controls).eq(0),c.$pagination=this.find(D.pagination).eq(0),c.$items=c.$canister.children().addClass(E.item),c.$controlItems=c.$controls.find(D.control),c.$paginationItems=c.$pagination.find(D.page),c.$images=c.$canister.find("img"),c.index=0,c.enabled=!1,c.leftPosition=0,c.totalImages=c.$images.length,c.autoTimer=null,c.resizeTimer=null,"object"===a.type(c.show)){var j=c.show,k=[];for(d in j)j.hasOwnProperty(d)&&k.push(d);k.sort(G.sortAsc),c.show={};for(d in k)k.hasOwnProperty(d)&&(c.show[k[d]]={width:parseInt(k[d]),count:j[k[d]]})}a.mediaquery("bind",c.rawGuid,c.mq,{enter:function(){i.call(c.$el,c)},leave:function(){h.call(c.$el,c)}}),c.$images.on(F.load,c,o),c.autoAdvance&&(c.autoTimer=G.startTimer(c.autoTimer,c.autoTime,function(){p(c)},!0)),e()}function g(b){G.clearTimer(b.autoTimer),G.startTimer(b.resizeTimer),h.call(this,b),a.mediaquery("unbind",b.rawGuid),b.$images.off(F.namespace),b.$items.removeClass([E.item,E.visible].join(" ")).unwrap().unwrap(),b.pagination&&b.$pagination.remove(),b.controls&&b.$controls.remove(),this.removeClass([E.base,E.ltr,E.rtl,E.enabled,E.animated,b.customClass].join(" ")),e()}function h(a){a.enabled&&(G.clearTimer(a.autoTimer),a.enabled=!1,this.removeClass([E.enabled,E.animated].join(" ")).off(F.namespace),a.$canister.touch("destroy").off(F.namespace).attr("style","").css(J,"none"),a.$items.css({width:"",height:""}),a.$controls.removeClass(E.visible),a.$pagination.removeClass(E.visible).html(""),a.useMargin?a.$canister.css({marginLeft:""}):a.$canister.css(I,""),a.index=0)}function i(a){a.enabled||(a.enabled=!0,this.addClass(E.enabled).on(F.clickTouchStart,D.control,a,q).on(F.clickTouchStart,D.page,a,r),a.$canister.touch({axis:"x",pan:!0,swipe:!0}).on(F.panStart,a,v).on(F.pan,a,w).on(F.panEnd,a,x).on(F.swipe,a,y).css(J,""),j.call(this,a))}function j(a){if(a.enabled){var b,c,d,e,f,g;if(a.count=a.$items.length,a.count<1)return;for(this.removeClass(E.animated),a.containerWidth=a.$container.outerWidth(!1),a.visible=u(a),a.perPage=a.paged?1:a.visible,a.itemMargin=parseInt(a.$items.eq(0).css("marginRight"))+parseInt(a.$items.eq(0).css("marginLeft")),a.itemWidth=(a.containerWidth-a.itemMargin*(a.visible-1))/a.visible,a.itemHeight=0,a.pageWidth=a.paged?a.itemWidth:a.containerWidth,a.pageCount=Math.ceil(a.count/a.perPage),a.canisterWidth=(a.pageWidth+a.itemMargin)*a.pageCount,a.$canister.css({width:a.canisterWidth}),a.$items.css({width:a.itemWidth,height:""}).removeClass(E.visible),a.pages=[],b=0,c=0;b<a.count;b+=a.perPage)d=a.$items.slice(b,b+a.perPage),d.length<a.perPage&&(d=0===b?a.$items:a.$items.slice(a.$items.length-a.perPage)),e=d.eq(a.rtl?d.length-1:0),f=e.outerHeight(),g=e.position().left,a.pages.push({left:a.rtl?g-(a.canisterWidth-a.pageWidth-a.itemMargin):g,height:f,$items:d}),f>a.itemHeight&&(a.itemHeight=f),c++;a.paged&&(a.pageCount-=a.count%a.visible),a.maxMove=-a.pages[a.pageCount-1].left,a.autoHeight&&a.$items.css({height:a.itemHeight});var h="";for(b=0;b<a.pageCount;b++)h+='<button type="button" class="'+E.page+'">'+(b+1)+"</button>";a.$pagination.html(h),a.pageCount<=1?(a.$controls.removeClass(E.visible),a.$pagination.removeClass(E.visible)):(a.$controls.addClass(E.visible),a.$pagination.addClass(E.visible)),a.$paginationItems=a.$el.find(D.page),s(a,a.index,!1),setTimeout(function(){a.$el.addClass(E.animated)},5)}}function k(a){a.enabled&&(a.$items=a.$canister.children().addClass(E.item),j.call(this,a))}function l(a,b){a.enabled&&(G.clearTimer(a.autoTimer),s(a,b-1))}function m(a){var b=a.index-1;a.infinite&&0>b&&(b=a.pageCount-1),s(a,b)}function n(a){var b=a.index+1;a.infinite&&b>=a.pageCount&&(b=0),s(a,b)}function o(a){var b=a.data;b.resizeTimer=G.startTimer(b.resizeTimer,20,function(){j.call(b.$el,b)})}function p(a){var b=a.index+1;b>=a.pageCount&&(b=0),s(a,b)}function q(b){G.killEvent(b);var c=b.data,d=c.index+(a(b.currentTarget).hasClass(E.control_next)?1:-1);G.clearTimer(c.autoTimer),s(c,d)}function r(b){G.killEvent(b);var c=b.data,d=c.$paginationItems.index(a(b.currentTarget));G.clearTimer(c.autoTimer),s(c,d)}function s(a,b,c){0>b&&(b=a.infinite?a.pageCount-1:0),b>=a.pageCount&&(b=a.infinite?0:a.pageCount-1),a.pages[b]&&(a.leftPosition=-a.pages[b].left),a.leftPosition=A(a,a.leftPosition),a.useMargin?a.$canister.css({marginLeft:a.leftPosition}):c===!1?(a.$canister.css(J,"none").css(I,"translateX("+a.leftPosition+"px)"),setTimeout(function(){a.$canister.css(J,"")},5)):a.$canister.css(I,"translateX("+a.leftPosition+"px)"),a.$items.removeClass(E.visible),a.pages[b].$items.addClass(E.visible),c!==!1&&b!==a.index&&(a.infinite||b>-1&&b<a.pageCount)&&a.$el.trigger(F.update,[b]),a.index=b,t(a)}function t(a){a.$paginationItems.removeClass(E.active).eq(a.index).addClass(E.active),a.infinite?a.$controlItems.addClass(E.visible):a.pageCount<1?a.$controlItems.removeClass(E.visible):(a.$controlItems.addClass(E.visible),a.index<=0?a.$controlItems.filter(D.control_previous).removeClass(E.visible):(a.index>=a.pageCount||a.leftPosition===a.maxMove)&&a.$controlItems.filter(D.control_next).removeClass(E.visible))}function u(c){if("object"===a.type(c.show)){for(var d in c.show)if(c.show.hasOwnProperty(d)&&b.windowWidth>=c.show[d].width)return c.fill&&c.count<c.show[d].count?c.count:c.show[d].count;return 1}return c.fill&&c.count<c.show?c.count:c.show}function v(a){var b=a.data;if(b.useMargin)b.leftPosition=parseInt(b.$canister.css("marginLeft"));else{var c=b.$canister.css(I).split(",");b.leftPosition=parseInt(c[4])}b.$canister.css(J,"none"),w(a),b.isTouching=!0}function w(a){var b=a.data;b.touchLeft=A(b,b.leftPosition+a.deltaX),b.useMargin?b.$canister.css({marginLeft:b.touchLeft}):b.$canister.css(I,"translateX("+b.touchLeft+"px)")}function x(a){var b=a.data,c=B(b,a),d=a.deltaX>-50&&a.deltaX<50?b.index:b.index+c;z(b,d)}function y(a){var b=a.data,c=B(b,a),d=b.index+c;z(b,d)}function z(a,b){a.$canister.css(J,""),s(a,b),a.isTouching=!1}function A(a,b){return isNaN(b)?b=0:a.rtl?(b>a.maxMove&&(b=a.maxMove),0>b&&(b=0)):(b<a.maxMove&&(b=a.maxMove),b>0&&(b=0)),b}function B(a,b){return a.rtl?"right"===b.directionX?1:-1:"left"===b.directionX?1:-1}var C=b.Plugin("carousel",{widget:!0,defaults:{autoAdvance:!1,autoHeight:!1,autoTime:8e3,controls:!0,customClass:"",fill:!1,infinite:!1,labels:{next:"Next",previous:"Previous"},maxWidth:1/0,minWidth:"0px",paged:!1,pagination:!0,show:1,rtl:!1,useMargin:!1},classes:["ltr","rtl","viewport","wrapper","container","canister","item","controls","control","pagination","page","animated","enabled","visible","active","control_previous","control_next"],events:{update:"update",panStart:"panstart",pan:"pan",panEnd:"panend",swipe:"swipe"},methods:{_construct:f,_destruct:g,_resize:d,disable:h,enable:i,jump:l,previous:m,next:n,reset:k,resize:j}}),D=C.classes,E=D.raw,F=C.events,G=C.functions,H=[],I=b.transform,J=b.transition}(jQuery,Formstone);