/*! formstone v1.4.22 [carousel.js] 2021-10-01 | GPL-3.0 License | formstone.it */
!function(e){"function"==typeof define&&define.amd?define(["jquery","./core","./mediaquery","./touch"],e):e(jQuery,Formstone)}(function(u,m){"use strict";function g(){H=u(j.base)}function h(e){e.enabled&&(X.clearTimer(e.autoTimer),e.enabled=!1,e.$subordinate.off(L.update),this.removeClass([y.enabled,y.animated].join(" ")).off(L.namespace),e.$canister.fsTouch("destroy").off(L.namespace).attr("style","").css(z,"none"),e.$items.css({width:"",height:""}).removeClass([y.visible,j.item_previous,j.item_next].join(" ")),e.$images.off(L.namespace),e.$controlItems.off(L.namespace),e.$pagination.html("").off(L.namespace),$(e),e.useMargin?e.$canister.css({marginLeft:""}):e.$canister.css(N,""),e.index=0)}function p(e){e.enabled||(e.enabled=!0,this.addClass(y.enabled),e.$controlItems.on(L.click,e,o),e.$pagination.on(L.click,j.page,e,r),e.$items.on(L.click,e,W),e.$subordinate.on(L.update,e,P),P({data:e},0),e.touch&&e.$canister.fsTouch({axis:"x",pan:!0,swipe:!0}).on(L.panStart,e,l).on(L.pan,e,c).on(L.panEnd,e,d).on(L.swipe,e,x).on(L.focusIn,e,M).css(z,""),f(e),e.$images.on(L.load,e,s),e.autoAdvance&&(e.autoTimer=X.startTimer(e.autoTimer,e.autoTime,function(){!function(e){var t=e.index+1;t>=e.pageCount&&(t=0);v(e,t)}(e)},!0)),i.call(this,e))}function i(e){if(e.enabled){var t,i,a,n,s;if(e.count=e.$items.length,e.count<1)return $(e),void e.$canister.css({height:""});if(this.removeClass(y.animated),e.containerWidth=e.$container.outerWidth(!1),e.visible=function(e){var t=1;{if(e.single)return t;if("object"==typeof e.show)for(var i in e.show)e.show.hasOwnProperty(i)&&(m.support.matchMedia?e.show[i].mq.matches&&(t=e.show[i].count):e.show[i].width<m.fallbackWidth&&(t=e.show[i].count));else t=e.show}return e.fill&&e.count<t?e.count:t}(e),e.perPage=e.paged?1:e.visible,e.itemMarginLeft=parseInt(e.$items.eq(0).css("marginLeft")),e.itemMarginRight=parseInt(e.$items.eq(0).css("marginRight")),e.itemMargin=e.itemMarginLeft+e.itemMarginRight,isNaN(e.itemMargin)&&(e.itemMargin=0),e.itemWidth=(e.containerWidth-e.itemMargin*(e.visible-1))/e.visible,e.itemHeight=0,e.pageWidth=e.paged?e.itemWidth:e.containerWidth,e.matchWidth)e.canisterWidth=e.single?e.containerWidth:(e.itemWidth+e.itemMargin)*e.count;else for(e.canisterWidth=0,e.$canister.css({width:1e6}),t=0;t<e.count;t++)e.canisterWidth+=e.$items.eq(t).outerWidth(!0);e.$canister.css({width:e.canisterWidth,height:""}),e.$items.css({width:e.matchWidth?e.itemWidth:"",height:""}).removeClass([y.visible,y.item_previous,y.item_next].join(" ")),e.pages=[],e.items=[];var o,r=0,l=0,c=0;for(n=a=0,i=u(),t=0;t<e.count;t++)o=e.$items.eq(t),r=e.matchWidth?e.itemWidth+e.itemMargin:o.outerWidth(!0),l=o.outerHeight(),c=o.position().left,e.items.push({$el:o,width:r,height:l,left:e.rtl?c-(e.canisterWidth-r):c}),(i.length&&a+r>e.containerWidth+e.itemMargin||e.paged&&0<t)&&(s=(e.rtl?i.eq(i.length-1):i.eq(0)).position().left,e.pages.push({left:e.rtl?s-(e.canisterWidth-a):s,height:n,width:a,$items:i}),i=u(),a=n=0),i=i.add(o),a+=r,r,n<l&&(n=l),n>e.itemHeight&&(e.itemHeight=n);if(e.rtl?i.eq(i.length-1):i.eq(0),s=e.canisterWidth-e.containerWidth-(e.rtl?e.itemMarginLeft:e.itemMarginRight),e.pages.push({left:e.rtl?-s:s,height:n,width:a,$items:i}),e.pageCount=e.pages.length,e.paged&&e.matchWidth&&(e.pageCount-=e.count%e.visible),e.pageCount<=0&&(e.pageCount=1),e.maxMove=(e.canisterWidth-e.containerWidth-(e.rtl?e.itemMarginLeft:e.itemMarginRight))*(e.rtl?1:-1),e.paged&&!e.matchWidth)for(t=0;t<e.pages.length;t++)if(e.pages[t].left-e.pages[t].width>Math.abs(e.maxMove)){e.pageCount=t;break}e.autoHeight?e.$canister.css({height:e.pages[0].height}):e.matchHeight&&e.$items.css({height:e.itemHeight});var d="";for(t=0;t<e.pageCount;t++)d+='<button type="button" class="'+y.page+'">'+(t+1)+"</button>";e.$pagination.html(d),e.pageCount<=1?$(e):function(e){e.$controls.addClass(y.visible),e.$controlItems.addClass(y.visible),e.$pagination.addClass(y.visible),C(e,e.$controlItems)}(e),e.$paginationItems=e.$pagination.find(j.page),v(e,e.index,!1),setTimeout(function(){e.$el.addClass(y.animated)},5)}}function f(e){e.$items=e.$canister.children().not(":hidden").addClass(y.item),e.$images=e.$canister.find("img"),e.totalImages=e.$images.length}function t(e,t){e.$images.off(L.namespace),!1!==t&&e.$canister.html(t),e.index=0,f(e),i.call(this,e)}function e(e,t,i,a,n){e.enabled&&(a||X.clearTimer(e.autoTimer),void 0===n&&(n=!0),v(e,t-1,n,i,a))}function a(e){var t=e.index-1;e.infinite&&t<0&&(t=e.pageCount-1),v(e,t)}function n(e){var t=e.index+1;e.infinite&&t>=e.pageCount&&(t=0),v(e,t)}function s(e){var t=e.data;t.resizeTimer=X.startTimer(t.resizeTimer,1,function(){i.call(t.$el,t)})}function o(e){X.killEvent(e);var t=e.data,i=t.index+(u(e.currentTarget).hasClass(y.control_next)?1:-1);X.clearTimer(t.autoTimer),v(t,i)}function r(e){X.killEvent(e);var t=e.data,i=t.$paginationItems.index(u(e.currentTarget));X.clearTimer(t.autoTimer),v(t,i)}function v(e,t,i,a,n){if(t<0&&(t=e.infinite?e.pageCount-1:0),t>=e.pageCount&&(t=e.infinite?0:e.pageCount-1),!(e.count<1)){if(e.pages[t]&&(e.leftPosition=-e.pages[t].left),e.leftPosition=T(e,e.leftPosition),e.useMargin?e.$canister.css({marginLeft:e.leftPosition}):!1===i?(e.$canister.css(z,"none").css(N,"translateX("+e.leftPosition+"px)"),setTimeout(function(){e.$canister.css(z,"")},5)):e.$canister.css(N,"translateX("+e.leftPosition+"px)"),e.$items.removeClass([y.visible,y.item_previous,y.item_next].join(" ")),e.single)for(var s=0,o=e.pages.length;s<o;s++)s===t?e.pages[s].$items.addClass(y.visible).attr("aria-hidden","false"):e.pages[s].$items.not(e.pages[t].$items).addClass(s<t?y.item_previous:y.item_next).attr("aria-hidden","true");else for(s=0;s<e.count;s++){var r=e.rtl?-1:1,l=e.leftPosition*r+e.items[s].left*r,c=l+e.items[s].width,d=e.containerWidth+e.itemMargin+1;-1<=l&&c<=d?e.items[s].$el.addClass(y.visible).attr("aria-hidden","false"):l<0?e.items[s].$el.addClass(y.item_previous).attr("aria-hidden","false"):e.items[s].$el.addClass(y.item_next).attr("aria-hidden","false")}e.autoHeight&&e.$canister.css({height:e.pages[t].height}),!1!==i&&!0!==a&&t!==e.index&&(e.infinite||-1<t&&t<e.pageCount)&&e.$el.trigger(L.update,[t]),e.index=t,e.linked&&!0!==n&&u(e.linked).not(e.$el)[q]("jumpPage",e.index+1,!0,!0),function(e){e.$paginationItems.removeClass(y.active).eq(e.index).addClass(y.active),e.infinite?(e.$controlItems.addClass(y.visible),C(e,e.$controlItems)):e.pageCount<1?(e.$controlItems.removeClass(y.visible),b(e,e.$controlItems)):(e.$controlItems.addClass(y.visible),C(e,e.$controlItems),e.index<=0?(e.$controlPrevious.removeClass(y.visible),b(e,e.$controlPrevious)):(e.index>=e.pageCount-1||!e.single&&e.leftPosition===e.maxMove)&&(e.$controlNext.removeClass(y.visible),b(e,e.$controlNext)))}(e)}}function $(e){e.$controls.removeClass(y.visible),e.$controlItems.removeClass(y.visible),e.$pagination.removeClass(y.visible),b(e,e.$controlItems)}function b(e,t){e.customControls||t.prop("disabled",!0)}function C(e,t){e.customControls||t.prop("disabled",!1)}function l(e,t){var i=e.data;if(X.clearTimer(i.autoTimer),!i.single){if(i.useMargin)i.leftPosition=parseInt(i.$canister.css("marginLeft"));else{var a=i.$canister.css(N).split(",");i.leftPosition=parseInt(a[4])}if(i.$canister.css(z,"none").css("will-change","transform"),c(e),i.linked&&!0!==t){var n=e.deltaX/i.pageWidth;i.rtl&&(n*=-1),u(i.linked).not(i.$el)[q]("panStart",n)}}i.isTouching=!0}function c(e,t){var i=e.data;if(!i.single&&(i.touchLeft=T(i,i.leftPosition+e.deltaX),i.useMargin?i.$canister.css({marginLeft:i.touchLeft}):i.$canister.css(N,"translateX("+i.touchLeft+"px)"),i.linked&&!0!==t)){var a=e.deltaX/i.pageWidth;i.rtl&&(a*=-1),u(i.linked).not(i.$el)[q]("pan",a)}}function d(e,t){var i=e.data,a=Math.abs(e.deltaX),n=I(i,e),s=!1;if(i.didPan=!1,0==n)s=i.index;else{if(!i.single){var o,r,l=Math.abs(i.touchLeft),c=!1,d=i.rtl?"right":"left";if(e.directionX===d)for(o=0,r=i.pages.length;o<r;o++)c=i.pages[o],l>Math.abs(c.left)+20&&(s=o+1);else for(o=i.pages.length-1,r=0;r<=o;o--)c=i.pages[o],l<Math.abs(c.left)&&(s=o-1)}!1===s&&(s=a<50?i.index:i.index+n)}s!==i.index&&(i.didPan=!0),i.linked&&!0!==t&&u(i.linked).not(i.$el)[q]("panEnd",s),w(i,s)}function x(e,t){var i=e.data,a=I(i,e),n=i.index+a;i.linked&&!0!==t&&u(i.linked).not(i.$el)[q]("swipe",e.directionX),w(i,n)}function w(e,t){e.$canister.css(z,"").css("will-change",""),v(e,t),e.isTouching=!1}function W(e){var t=e.data,i=u(e.currentTarget);if(!t.didPan&&(i.trigger(L.itemClick),t.controller)){var a=t.$items.index(i);P(e,a),t.$subordinate[q]("jumpPage",a+1,!0)}}function M(e){var t=e.data;if(t.enabled&&!t.isTouching){X.clearTimer(t.autoTimer),t.$container.scrollLeft(0);var i,a=u(e.target);a.hasClass(y.item)?i=a:a.parents(j.item).length&&(i=a.parents(j.item).eq(0));for(var n=0;n<t.pageCount;n++)if(t.pages[n].$items.is(i)){v(t,n);break}}}function P(e,t){var i=e.data;if(i.controller){var a=i.$items.eq(t);i.$items.removeClass(y.active),a.addClass(y.active);for(var n=0;n<i.pageCount;n++)if(i.pages[n].$items.is(a)){v(i,n,!0,!0);break}}}function T(e,t){return isNaN(t)?t=0:e.rtl?(t>e.maxMove&&(t=e.maxMove),t<0&&(t=0)):(t<e.maxMove&&(t=e.maxMove),0<t&&(t=0)),t}function I(e,t){return Math.abs(t.deltaX)<Math.abs(t.deltaY)?0:e.rtl?"right"===t.directionX?1:-1:"left"===t.directionX?1:-1}var _=m.Plugin("carousel",{widget:!0,defaults:{autoAdvance:!1,autoHeight:!1,autoTime:8e3,contained:!0,controls:!0,customClass:"",fill:!1,infinite:!1,labels:{next:"Next",previous:"Previous",controls:"Carousel {guid} Controls",pagination:"Carousel {guid} Pagination"},matchHeight:!1,matchWidth:!0,maxWidth:1/0,minWidth:"0px",paged:!1,pagination:!0,rtl:!1,show:1,single:!1,theme:"fs-light",touch:!0,useMargin:!1},classes:["ltr","rtl","viewport","wrapper","container","canister","item","item_previous","item_next","controls","controls_custom","control","control_previous","control_next","pagination","page","animated","enabled","visible","active","auto_height","contained","single"],events:{itemClick:"itemClick",update:"update"},methods:{_construct:function(e){var t;e.didPan=!1,e.carouselClasses=[y.base,e.theme,e.customClass,e.rtl?y.rtl:y.ltr],e.maxWidth=e.maxWidth===1/0?"100000px":e.maxWidth,e.mq="(min-width:"+e.minWidth+") and (max-width:"+e.maxWidth+")",e.customControls="object"==typeof e.controls&&e.controls.previous&&e.controls.next,e.customPagination="string"==typeof e.pagination,e.id=this.attr("id"),e.id?e.ariaId=e.id:(e.ariaId=e.rawGuid,this.attr("id",e.ariaId)),m.support.transform||(e.useMargin=!0);var i="",a="",n=[y.control,y.control_previous].join(" "),s=[y.control,y.control_next].join(" ");e.controls&&!e.customControls&&(e.labels.controls=e.labels.controls.replace("{guid}",e.numGuid),i+='<div class="'+y.controls+'" aria-label="'+e.labels.controls+'" aria-controls="'+e.ariaId+'">',i+='<button type="button" class="'+n+'" aria-label="'+e.labels.previous+'">'+e.labels.previous+"</button>",i+='<button type="button" class="'+s+'" aria-label="'+e.labels.next+'">'+e.labels.next+"</button>",i+="</div>"),e.pagination&&!e.customPagination&&(e.labels.pagination=e.labels.pagination.replace("{guid}",e.numGuid),a+='<div class="'+y.pagination+'" aria-label="'+e.labels.pagination+'" aria-controls="'+e.ariaId+'" role="navigation">',a+="</div>"),e.autoHeight&&e.carouselClasses.push(y.auto_height),e.contained&&e.carouselClasses.push(y.contained),e.single&&e.carouselClasses.push(y.single),this.addClass(e.carouselClasses.join(" ")).wrapInner('<div class="'+y.wrapper+'" aria-live="polite"><div class="'+y.container+'"><div class="'+y.canister+'"></div></div></div>').append(i).wrapInner('<div class="'+y.viewport+'"></div>').append(a),e.$viewport=this.find(j.viewport).eq(0),e.$container=this.find(j.container).eq(0),e.$canister=this.find(j.canister).eq(0),e.$pagination=this.find(j.pagination).eq(0),e.$controlPrevious=e.$controlNext=u(""),e.customControls?(e.$controls=u(e.controls.container).addClass([y.controls,y.controls_custom].join(" ")),e.$controlPrevious=u(e.controls.previous).addClass(n),e.$controlNext=u(e.controls.next).addClass(s)):(e.$controls=this.find(j.controls).eq(0),e.$controlPrevious=e.$controls.find(j.control_previous),e.$controlNext=e.$controls.find(j.control_next)),e.$controlItems=e.$controlPrevious.add(e.$controlNext),e.customPagination&&(e.$pagination=u(e.pagination).addClass([y.pagination])),e.$paginationItems=e.$pagination.find(j.page),e.index=0,e.enabled=!1,e.leftPosition=0,e.autoTimer=null,e.resizeTimer=null;var o=this.data(k+"-linked");e.linked=!!o&&"[data-"+k+'-linked="'+o+'"]',e.linked&&(e.paged=!0);var r=this.data(k+"-controller-for")||"";if(e.$subordinate=u(r),e.$subordinate.length&&(e.controller=!0),"object"==typeof e.show){var l=e.show,c=[],d=[];for(t in l)l.hasOwnProperty(t)&&d.push(t);for(t in d.sort(X.sortAsc),d)d.hasOwnProperty(t)&&c.push({width:parseInt(d[t]),count:l[d[t]],mq:window.matchMedia("(min-width: "+parseInt(d[t])+"px)")});e.show=c}f(e),u.fsMediaquery("bind",e.rawGuid,e.mq,{enter:function(){p.call(e.$el,e)},leave:function(){h.call(e.$el,e)}}),g(),e.carouselClasses.push(y.enabled),e.carouselClasses.push(y.animated)},_destruct:function(e){X.clearTimer(e.autoTimer),X.clearTimer(e.resizeTimer),h.call(this,e),u.fsMediaquery("unbind",e.rawGuid),e.id!==e.ariaId&&this.removeAttr("id"),e.$controlItems.removeClass([j.control,y.control_previous,j.control_next,j.visible].join(" ")).off(L.namespace),C(e,e.$controlItems),e.$images.off(L.namespace),e.$canister.fsTouch("destroy"),e.$items.removeClass([y.item,y.visible,j.item_previous,j.item_next].join(" ")).unwrap().unwrap().unwrap().unwrap(),e.controls&&!e.customControls&&e.$controls.remove(),e.customControls&&e.$controls.removeClass([y.controls,y.controls_custom,y.visible].join(" ")),e.pagination&&!e.customPagination&&e.$pagination.remove(),e.customPagination&&e.$pagination.html("").removeClass([y.pagination,y.visible].join(" ")),this.removeClass(e.carouselClasses.join(" ")),g()},_resize:function(e){X.iterate.call(H,i)},disable:h,enable:p,jump:e,previous:a,next:n,jumpPage:e,previousPage:a,nextPage:n,jumpItem:function(e,t,i,a,n){if(e.enabled){X.clearTimer(e.autoTimer);var s=e.$items.eq(t-1);void 0===n&&(n=!0);for(var o=0;o<e.pageCount;o++)if(e.pages[o].$items.is(s)){v(e,o,n,i,a);break}}},reset:function(e){e.enabled&&t.call(this,e,!1)},resize:i,update:t,panStart:function(e,t){if(X.clearTimer(e.autoTimer),!e.single){if(e.rtl&&(t*=-1),e.useMargin)e.leftPosition=parseInt(e.$canister.css("marginLeft"));else{var i=e.$canister.css(N).split(",");e.leftPosition=parseInt(i[4])}e.$canister.css(z,"none"),c({data:e,deltaX:e.pageWidth*t},!0)}e.isTouching=!0},pan:function(e,t){if(!e.single){e.rtl&&(t*=-1);var i=e.pageWidth*t;e.touchLeft=T(e,e.leftPosition+i),e.useMargin?e.$canister.css({marginLeft:e.touchLeft}):e.$canister.css(N,"translateX("+e.touchLeft+"px)")}},panEnd:function(e,t){w(e,t)},swipe:function(e,t){x({data:e,directionX:t},!0)}}}),k=_.namespace,q=_.namespaceClean,j=_.classes,y=j.raw,L=_.events,X=_.functions,H=[],N=m.transform,z=m.transition});