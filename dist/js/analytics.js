/*! formstone v1.4.16-1 [analytics.js] 2019-08-06 | GPL-3.0 License | formstone.it */
!function(e){"function"==typeof define&&define.amd?define(["jquery","./core","./mediaquery"],e):e(jQuery,Formstone)}(function(c,l){"use strict";function t(){p.scrollDepth&&o()}function n(){var e,t=c(this),n="undefined"!==c.type(t[0].href)?t[0].href:"",i=document.domain.split(".").reverse(),a=null!==n.match(i[1]+"."+i[0]);if(n.match(/^mailto\:/i))e="Email, Click, "+n.replace(/^mailto\:/i,"");else if(n.match(/^tel\:/i))e="Telephone, Click, "+n.replace(/^tel\:/i,"");else if(n.match(p.fileTypes)){e="File, Download:"+(/[.]/.exec(n)?/[^.]+$/.exec(n):void 0)[0]+", "+n.replace(/ /g,"-")}else a||(e="ExternalLink, Click, "+n);e&&t.attr(w,e)}function i(e){v.startTimer(T,250,a)}function a(){for(var e,t=u.scrollTop()+l.windowHeight,n=1/p.scrollStops,i=n,a=1;a<=p.scrollStops;a++){if(e=Math.round(100*i).toString(),!x[k][e].passed&&t>x[k][e].edge)x[k][e].passed=!0,s(c.extend(p.scrollFields,{eventCategory:"ScrollDepth",eventAction:k,eventLabel:e,nonInteraction:!0}));i+=n}}function o(){var e,t=c.mediaquery("state"),n=h.outerHeight(),i={},a=1/p.scrollStops,l=a,o=0;t.minWidth&&(k="MinWidth:"+t.minWidth+"px");for(var r=1;r<=p.scrollStops;r++)o=parseInt(n*l),i[e=Math.round(100*l).toString()]={edge:"100"===e?o-10:o,passsed:!(!x[k]||!x[k][e])&&x[k][e].passed},l+=a;x[k]=i}function r(e){var t=c(this),n=t.attr("href"),i=t.data(g).split(",");for(var a in p.eventCallback&&e.preventDefault(),i)i.hasOwnProperty(a)&&(i[a]=c.trim(i[a]));s({eventCategory:i[0],eventAction:i[1],eventLabel:i[2]||n,eventValue:i[3],nonInteraction:i[4]},t)}function s(e,t){d.location;var n=c.extend({hitType:"event"},e);if("undefined"!==c.type(t)&&!t.attr("data-analytics-stop")){var i="undefined"!==c.type(t[0].href)?t[0].href:"",a=!i.match(/^mailto\:/i)&&!i.match(/^tel\:/i)&&i.indexOf(":")<0?d.location.protocol+"//"+d.location.hostname+"/"+i:i;if(""!==a){var l=t.attr("target");if(l)d.open(a,l);else if(p.eventCallback){var o="hitCallback";n[o]=function(){b&&(v.clearTimer(b),function(e){document.location=e}(a))},b=v.startTimer(b,p.eventTimeout,n[o])}}}f(n)}function f(e){if("function"===c.type(d.ga)&&"function"===c.type(d.ga.getAll))for(var t=d.ga.getAll(),n=0,i=t.length;n<i;n++)d.ga(t[n].get("name")+".send",e)}var e=l.Plugin("analytics",{methods:{_resize:t},utilities:{_delegate:function(){if(arguments.length&&"object"!==c.type(arguments[0]))if("destroy"===arguments[0])(function(){y&&h&&h.length&&(u.off(m.namespace),h.off(m.namespace),y=!1)}).apply(this);else{var e=Array.prototype.slice.call(arguments,1);switch(arguments[0]){case"pageview":(function(e){f(c.extend({hitType:"pageview"},e))}).apply(this,e);break;case"event":s.apply(this,e)}}else(function(e){!y&&h&&h.length&&(y=!0,(p=c.extend(p,e||{})).autoEvents&&h.find("a").not("["+w+"]").each(n),p.scrollDepth&&(o(),u.on(m.scroll,i).one(m.load,t)),h.on(m.click,"*["+w+"]",r))}).apply(this,arguments);return null}}}),p={autoEvents:!1,fileTypes:/\.(zip|exe|dmg|pdf|doc.*|xls.*|ppt.*|mp3|txt|rar|wma|mov|avi|wmv|flv|wav)$/i,eventCallback:!1,eventTimeout:1e3,scrollDepth:!1,scrollStops:5,scrollFields:{}},d=l.window,u=l.$window,h=null,v=e.functions,m=e.events,y=!1,g="analytics-event",w="data-"+g,x={},T=null,k="Site",b=null;l.Ready(function(){h=l.$body})});